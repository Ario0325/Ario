{% load static %}
{% load menu_tags %}

<!-- Modern Ultra Premium Navbar -->
<header class="modern-navbar-wrapper" id="modernNavbar">
    <!-- Top Bar with Animations -->
    <div class="top-announcement-bar">
        <div class="container">
            <div class="announcement-content">
                <span class="announcement-icon">üéâ</span>
                <span class="announcement-text">ÿßÿ±ÿ≥ÿßŸÑ ÿ±ÿß€å⁄ØÿßŸÜ ÿ®ÿ±ÿß€å ÿ≥ŸÅÿßÿ±ÿ¥‚ÄåŸáÿß€å ÿ®ÿßŸÑÿß€å 500,000 ÿ™ŸàŸÖÿßŸÜ</span>
                <button class="announcement-close" aria-label="ÿ®ÿ≥ÿ™ŸÜ">√ó</button>
            </div>
        </div>
    </div>

    <!-- Main Navigation -->
    <nav class="main-navigation" id="mainNav">
        <div class="container">
            <div class="nav-container">
                <!-- Logo Section -->
                <div class="nav-brand">
                    <a href="/" class="logo-link">
                        <img src="{% static 'assets/images/logo.png' %}" alt="Ario Shop" class="logo-img">
                        <span class="logo-text">Ario Shop</span>
                    </a>
                </div>

                <!-- Desktop Menu -->
                <div class="nav-menu" id="navMenu">
                    <ul class="menu-list">
                        {% get_menu_items 'main' as menu_items %}
                        {% for item in menu_items %}
                        <li class="menu-item {% if item.has_children %}has-dropdown{% endif %}">
                            <a href="{{ item.resolved_url }}" class="menu-link">
                                <span class="link-text">{{ item.title }}</span>
                                {% if item.has_children %}
                                <i class="dropdown-icon">‚ñº</i>
                                {% endif %}
                            </a>
                            
                            {% if item.has_children %}
                            <div class="dropdown-menu mega-menu">
                                <div class="dropdown-content">
                                    <div class="mega-menu-grid">
                                        {% for child in item.get_children %}
                                        <div class="mega-menu-column">
                                            <a href="{{ child.resolved_url }}" class="mega-menu-item">
                                                <span class="mega-item-icon">‚Üí</span>
                                                <span class="mega-item-text">{{ child.title }}</span>
                                            </a>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                            {% endif %}
                        </li>
                        {% endfor %}
                    </ul>
                </div>

                <!-- Actions Section -->
                <div class="nav-actions">
                    <!-- Search -->
                    <div class="action-item search-wrapper">
                        <button class="action-btn search-trigger" aria-label="ÿ¨ÿ≥ÿ™ÿ¨Ÿà">
                            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                        <div class="search-panel">
                            <div class="search-panel-inner">
                                <form class="search-form" action="{% url 'products:product_list' %}" method="get">
                                    <input type="search" name="q" class="search-input" placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà€å ŸÖÿ≠ÿµŸàŸÑÿßÿ™..." autocomplete="off">
                                    <button type="submit" class="search-submit">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                            <circle cx="11" cy="11" r="8"></circle>
                                            <path d="m21 21-4.35-4.35"></path>
                                        </svg>
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- User Account -->
                    <div class="action-item">
                        <a href="{% if user.is_authenticated %}{% url 'accounts:dashboard' %}{% else %}{% url 'accounts:login_register' %}{% endif %}" class="action-btn" aria-label="ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å">
                            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                <circle cx="12" cy="7" r="4"></circle>
                            </svg>
                            <span class="action-badge user-badge">
                                {% if user.is_authenticated %}{{ user.first_name|slice:":1" }}{% endif %}
                            </span>
                        </a>
                    </div>

                    <!-- Wishlist -->
                    <div class="action-item">
                        <a href="#" class="action-btn" aria-label="ÿπŸÑÿßŸÇŸá‚ÄåŸÖŸÜÿØ€å‚ÄåŸáÿß">
                            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                            </svg>
                            <span class="action-badge">3</span>
                        </a>
                    </div>

                    <!-- Shopping Cart -->
                    <div class="action-item cart-wrapper">
                        <a href="{% url 'cart:cart' %}" class="action-btn cart-trigger" aria-label="ÿ≥ÿ®ÿØ ÿÆÿ±€åÿØ">
                            <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <circle cx="9" cy="21" r="1"></circle>
                                <circle cx="20" cy="21" r="1"></circle>
                                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                            </svg>
                            <span class="action-badge cart-count">0</span>
                        </a>
                    </div>

                    <!-- Mobile Menu Toggle -->
                    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="ŸÖŸÜŸà€å ŸÖŸàÿ®ÿß€åŸÑ">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay">
        <div class="mobile-menu-panel">
            <div class="mobile-menu-header">
                <div class="mobile-menu-logo">
                    <img src="{% static 'assets/images/logo.png' %}" alt="Ario Shop">
                    <span>Ario Shop</span>
                </div>
                <button class="mobile-menu-close" id="mobileMenuClose">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <div class="mobile-menu-body">
                <!-- User Section -->
                <div class="mobile-user-section">
                    {% if user.is_authenticated %}
                    <div class="mobile-user-info">
                        <div class="mobile-user-avatar">{{ user.first_name|slice:":1"|default:"U" }}</div>
                        <div class="mobile-user-details">
                            <span class="mobile-user-name">{{ user.get_full_name|default:"⁄©ÿßÿ±ÿ®ÿ±" }}</span>
                            <a href="{% url 'accounts:dashboard' %}" class="mobile-user-link">ŸÖÿ¥ÿßŸáÿØŸá Ÿæÿ±ŸàŸÅÿß€åŸÑ</a>
                        </div>
                    </div>
                    {% else %}
                    <a href="{% url 'accounts:login_register' %}" class="mobile-login-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                            <polyline points="10 17 15 12 10 7"></polyline>
                            <line x1="15" y1="12" x2="3" y2="12"></line>
                        </svg>
                        <span>Ÿàÿ±ŸàÿØ / ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ</span>
                    </a>
                    {% endif %}
                </div>

                <!-- Mobile Menu Items -->
                <ul class="mobile-menu-list">
                    {% get_menu_items 'main' as menu_items %}
                    {% for item in menu_items %}
                    <li class="mobile-menu-item {% if item.has_children %}has-submenu{% endif %}">
                        <a href="{{ item.resolved_url }}" class="mobile-menu-link">
                            <span>{{ item.title }}</span>
                            {% if item.has_children %}
                            <button class="submenu-toggle">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>
                            {% endif %}
                        </a>
                        {% if item.has_children %}
                        <ul class="mobile-submenu">
                            {% for child in item.get_children %}
                            <li class="mobile-submenu-item">
                                <a href="{{ child.resolved_url }}" class="mobile-submenu-link">{{ child.title }}</a>
                            </li>
                            {% endfor %}
                        </ul>
                        {% endif %}
                    </li>
                    {% endfor %}
                </ul>
            </div>

            <div class="mobile-menu-footer">
                <div class="mobile-contact-info">
                    <p>Ÿæÿ¥ÿ™€åÿ®ÿßŸÜ€å: <a href="tel:02112345678">021-12345678</a></p>
                    <p>ÿß€åŸÖ€åŸÑ: <a href="mailto:support@arioshop.com">support@arioshop.com</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay"></div>
</header>

<style>
/* Navbar will be styled in separate CSS file */
</style>

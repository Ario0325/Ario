/* ═══════════════════════════════════════════════════════════════════════════
   discount-widget.css — ویجت کد تخفیف
   Responsive Discount Code Widget for Ario Shop
   ═══════════════════════════════════════════════════════════════════════════ */

/* ── متغیرها ──────────────────────────────────────────────────────────────── */
:root {
    --dw-accent:        #c96;
    --dw-accent-soft:   rgba(204, 153, 102, 0.18);
    --dw-accent-border: rgba(204, 153, 102, 0.3);
    --dw-text-dark:     #4e3820;
    --dw-text-muted:    #7f6f5f;
    --dw-green:         #1f7a45;
    --dw-green-soft:    rgba(31, 122, 69, 0.1);
    --dw-red:           #c62828;
    --dw-radius:        1.2rem;
    --dw-transition:    all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ── اصلاح محدودیت max-width قالب ────────────────────────────────────────── */
/* قالب Molla محدودیت max-width: 326px روی .cart-discount می‌گذارد
   که باعث می‌شود ویجت در لپ‌تاپ و موبایل کوچک و ناقص نمایش داده شود */
.cart-discount {
    flex: 1 1 auto !important;
    max-width: 100% !important;
    width: 100% !important;
    min-width: 0 !important;
}

/* در دسکتاپ، cart-bottom را flex-wrap می‌کنیم تا ویجت فضای کافی داشته باشد */
.cart-bottom {
    flex-wrap: wrap !important;
    gap: 1rem !important;
    align-items: flex-start !important;
}

/* دکمه «به‌روزرسانی سبد» را به سمت راست می‌فرستیم */
.cart-bottom > .btn {
    margin-right: auto !important;
    flex-shrink: 0 !important;
    align-self: flex-start !important;
}

/* ── کانتینر اصلی ویجت ────────────────────────────────────────────────────── */
.discount-widget {
    --dw-border-width: 1.5px;
    position: relative;
    border: var(--dw-border-width) solid var(--dw-accent-border) !important;
    border-radius: var(--dw-radius) !important;
    background: linear-gradient(145deg, #fffdfb 0%, #fff8f1 100%) !important;
    padding: 1.4rem 1.6rem !important;
    overflow: visible !important;
    transition: var(--dw-transition) !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    display: block !important;
}

.discount-widget:hover {
    border-color: rgba(204, 153, 102, 0.5) !important;
    box-shadow: 0 12px 28px -16px rgba(68, 45, 20, 0.3) !important;
}

/* لایه تزئینی پس‌زمینه */
.discount-widget__surface {
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
        radial-gradient(circle at 100% 0, rgba(204, 153, 102, 0.12), transparent 45%),
        radial-gradient(circle at 0 100%, rgba(204, 153, 102, 0.08), transparent 42%);
    border-radius: var(--dw-radius);
    z-index: 0;
}

/* ── هدر ویجت ─────────────────────────────────────────────────────────────── */
.discount-widget__header {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    margin-bottom: 1rem;
    flex-wrap: nowrap;
}

.discount-widget__title-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
    min-width: 0;
}

.discount-widget__icon {
    font-size: 1.2rem;
    line-height: 1;
    flex-shrink: 0;
    color: var(--dw-accent);
}

.discount-widget__title {
    margin: 0 !important;
    font-size: 1rem !important;
    font-weight: 700 !important;
    color: var(--dw-text-dark) !important;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.discount-widget__badge {
    display: inline-block;
    padding: 0.2rem 0.65rem;
    border-radius: 999px;
    font-size: 0.75rem;
    font-weight: 700;
    background: var(--dw-accent-soft);
    color: var(--dw-text-dark);
    white-space: nowrap;
    flex-shrink: 0;
    border: 1px solid var(--dw-accent-border);
}

.discount-widget__badge--active {
    background: var(--dw-green-soft);
    color: var(--dw-green);
    border-color: rgba(31, 122, 69, 0.25);
}

/* ── حالت کد فعال ─────────────────────────────────────────────────────────── */
.discount-widget__active {
    position: relative;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 0.75rem;
    padding: 0.9rem 1.1rem;
    border: 1.5px solid rgba(31, 122, 69, 0.25);
    border-radius: 0.9rem;
    background: linear-gradient(135deg, #f4fff5 0%, #ecfaef 100%);
    width: 100%;
    box-sizing: border-box;
    animation: dwFadeIn 0.3s ease;
}

.discount-widget__active-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    flex: 1;
    min-width: 0;
}

.discount-widget__active-label {
    font-size: 0.88rem;
    color: #4b5c4e;
    white-space: nowrap;
}

.discount-widget__active-code {
    font-weight: 700;
    letter-spacing: 0.06em;
    color: var(--dw-green);
    background: var(--dw-green-soft);
    padding: 0.2rem 0.55rem;
    border-radius: 0.45rem;
    font-size: 0.95rem;
    white-space: nowrap;
}

.discount-widget__active-scope {
    font-size: 0.8rem;
    color: var(--dw-text-muted);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 160px;
}

.discount-widget__active-amount {
    display: flex;
    align-items: center;
    gap: 0.35rem;
    font-size: 0.88rem;
    color: var(--dw-red);
    font-weight: 600;
    white-space: nowrap;
}

.discount-widget__active-amount-label {
    color: #4b5c4e;
    font-weight: 400;
}

.discount-widget__active-amount-value {
    font-weight: 700;
}

/* دکمه حذف کد */
.discount-widget__remove-form {
    margin: 0;
    flex-shrink: 0;
}

.discount-widget__remove-btn {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.4rem !important;
    border: 1.5px solid rgba(140, 104, 64, 0.3) !important;
    border-radius: 999px !important;
    background: #fff !important;
    color: #7d5630 !important;
    font-size: 0.85rem !important;
    font-weight: 700 !important;
    padding: 0.5rem 1.1rem !important;
    cursor: pointer !important;
    transition: var(--dw-transition) !important;
    white-space: nowrap !important;
    min-height: 38px !important;
}

.discount-widget__remove-btn:hover,
.discount-widget__remove-btn:focus {
    color: #fff !important;
    border-color: transparent !important;
    background: linear-gradient(135deg, #e07d73 0%, #c75b7b 100%) !important;
    box-shadow: 0 6px 16px -8px rgba(199, 91, 123, 0.8) !important;
    outline: none !important;
}

/* ── فرم ورود کد ──────────────────────────────────────────────────────────── */
.discount-widget__form {
    position: relative;
    z-index: 1;
    width: 100%;
}

.discount-widget__form-inner {
    width: 100%;
}

/* input-group: input + دکمه در یک ردیف */
.discount-widget__input-group {
    display: flex !important;
    align-items: stretch !important;
    width: 100% !important;
    gap: 0 !important;
}

.discount-widget__input {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    height: 46px !important;
    border: 1.5px solid #ead8c4 !important;
    border-left: none !important;
    border-radius: 0 var(--dw-radius) var(--dw-radius) 0 !important;
    background: rgba(255, 255, 255, 0.92) !important;
    color: #4e3820 !important;
    font-size: 0.92rem !important;
    padding: 0 1rem !important;
    transition: var(--dw-transition) !important;
    box-shadow: none !important;
    outline: none !important;
}

.discount-widget__input::placeholder {
    color: #c4a89f;
    font-size: 0.88rem;
}

.discount-widget__input:focus {
    border-color: #d8b28b !important;
    background: #fff !important;
    box-shadow: 0 0 0 3px var(--dw-accent-soft) !important;
    z-index: 2 !important;
}

/* input-group-append */
.discount-widget__input-group .input-group-append {
    display: flex !important;
    flex-shrink: 0 !important;
}

/* دکمه اعمال کد */
.discount-widget__submit-btn {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.4rem !important;
    height: 46px !important;
    min-width: 110px !important;
    padding: 0 1.2rem !important;
    border: 1.5px solid #dbb58f !important;
    border-radius: var(--dw-radius) 0 0 var(--dw-radius) !important;
    background: #fff !important;
    color: #7d5630 !important;
    font-size: 0.88rem !important;
    font-weight: 700 !important;
    cursor: pointer !important;
    transition: var(--dw-transition) !important;
    white-space: nowrap !important;
    flex-shrink: 0 !important;
}

.discount-widget__submit-btn:hover,
.discount-widget__submit-btn:focus {
    background: var(--dw-accent) !important;
    border-color: transparent !important;
    color: #fff !important;
    box-shadow: 0 8px 18px -10px rgba(201, 153, 102, 0.9) !important;
    outline: none !important;
}

.discount-widget__submit-text {
    font-size: 0.88rem;
}

.discount-widget__submit-icon {
    font-size: 0.85rem;
}

/* ── خلاصه سبد: ردیف تخفیف ───────────────────────────────────────────────── */
.summary-discount td {
    font-weight: 600;
    color: var(--dw-red) !important;
}

/* هایلایت ردیف محصول تخفیف‌خورده */
.table-cart tr.table-success td {
    background-color: rgba(31, 122, 69, 0.05) !important;
}

/* ── انیمیشن‌ها ───────────────────────────────────────────────────────────── */
@keyframes dwFadeIn {
    from { opacity: 0; transform: translateY(-6px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* ── ریسپانسیو: تبلت (768px – 1199px) ────────────────────────────────────── */
@media (min-width: 768px) and (max-width: 1199px) {
    .discount-widget {
        padding: 1.2rem 1.4rem !important;
    }

    .discount-widget__submit-btn {
        min-width: 90px !important;
        padding: 0 1rem !important;
    }
}

/* ── ریسپانسیو: موبایل (زیر 768px) ──────────────────────────────────────── */
@media (max-width: 767px) {
    /* cart-bottom در موبایل ستونی می‌شود (قالب این کار را می‌کند)
       ما فقط مطمئن می‌شویم ویجت تمام عرض را می‌گیرد */
    .cart-discount {
        width: 100% !important;
        max-width: 100% !important;
    }

    .discount-widget {
        padding: 1.1rem 1.2rem !important;
    }

    /* هدر: آیکون و عنوان در یک ردیف، badge در کنار */
    .discount-widget__header {
        flex-wrap: nowrap !important;
        gap: 0.5rem !important;
    }

    /* حالت کد فعال: ستونی */
    .discount-widget__active {
        flex-direction: column !important;
        align-items: flex-start !important;
        gap: 0.6rem !important;
    }

    .discount-widget__active-info {
        width: 100% !important;
    }

    .discount-widget__active-amount {
        width: 100% !important;
    }

    .discount-widget__remove-btn {
        width: 100% !important;
        justify-content: center !important;
    }

    /* فرم: input و دکمه در یک ردیف (نه ستونی) */
    .discount-widget__input-group {
        flex-direction: row !important;
    }

    .discount-widget__input {
        height: 44px !important;
        font-size: 0.85rem !important;
    }

    .discount-widget__submit-btn {
        height: 44px !important;
        min-width: 80px !important;
        padding: 0 0.8rem !important;
        font-size: 0.82rem !important;
    }

    /* در موبایل خیلی کوچک، متن دکمه را پنهان کن */
    @media (max-width: 400px) {
        .discount-widget__submit-text {
            display: none !important;
        }

        .discount-widget__submit-btn {
            min-width: 50px !important;
            padding: 0 0.7rem !important;
        }
    }
}

/* ── ریسپانسیو: موبایل خیلی کوچک (زیر 400px) ────────────────────────────── */
@media (max-width: 400px) {
    .discount-widget__submit-text {
        display: none !important;
    }

    .discount-widget__submit-btn {
        min-width: 50px !important;
        padding: 0 0.7rem !important;
    }

    .discount-widget__active-scope {
        max-width: 120px !important;
    }
}

/* ── دسکتاپ بزرگ (بالای 1440px) ─────────────────────────────────────────── */
@media (min-width: 1440px) {
    .discount-widget {
        padding: 1.6rem 2rem !important;
    }

    .discount-widget__submit-btn {
        min-width: 130px !important;
    }
}
